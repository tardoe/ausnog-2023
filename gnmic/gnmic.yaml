port: 57400
timeout: 10s
insecure: true

loader:
  type: http
  url: http://netbox:8080/api/dcim/devices?export=gnmic%20Target%20Export
  interval: 30s
  token: d140bcb0358eef4562178651abc435fe23778300
  auth-scheme: Token

subscriptions:
  openconfig_interfaces:
      paths:
        - /interfaces/interface[name=*]/state/counters
        - /interfaces/interface[name=*]/state/admin-status
        - /interfaces/interface[name=*]/state/oper-status
        - /interfaces/interface[name=*]/state/last-change
        - /interfaces/interface[name=*]/ethernet/state/port-speed
        - /interfaces/interface[name=*]/ethernet/state/counters/in-crc-errors
        - /interfaces/interface[name=*]/ethernet/state/counters/in-fragment-frames
        - /interfaces/interface[name=*]/ethernet/state/counters/in-jabber-frames
        - /interfaces/interface[name=*]/ethernet/state/counters/in-oversize-frames
      stream-mode: sample
      sample-interval: 10s

outputs:
  prometheus:
      type: prometheus_write
      url: http://prometheus:9090/api/v1/write
      metadata:
        include: true
